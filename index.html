<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <head>
        <title>VRL - Velocity Racing League - Season 2</title>
        <link rel="icon" type="image/png" href="VRL_logo_nove.png">
    </head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="vrl_high_res.png" alt="F1 VRL Logo" class="logo-img">
                </div>
                <div class="header-controls">
                    <button class="theme-switch" id="themeSwitch">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
                <nav id="mobileNav">
                    <ul>
                        <li><a href="index.html">Domů</a></li>
                        <li><a href="calendar.html">Kalendář</a></li>
                        <li><a href="jezdci.html">Jezdci</a></li>
                        <li><a href="tymy.html">Týmy</a></li>
                        <li><a href="okruh.html">Okruhy</a></li>
                        <li><a href="vysledky.html">Výsledky</a></li>
                        <li><a href="prihlasky.html">Příhlášky</a></li>
                        <li><a href="https://discord.gg/CMxscEUcRd" class="discord-btn"><i class="fab fa-discord"></i>
                                Discord</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-fade"></div>
        <div class="container">
            <div class="hero-content">
                <h2>Velocity Racing League</h2>
                <p>Druhá sezóna VRL právě začíná! Připoj se k naší virtuální motorsportové soutěži.</p>
                <div>
                    <a href="https://discord.gg/CMxscEUcRd" class="btn"><i class="fab fa-discord"></i> Připojit se na
                        Discord</a>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <section class="season-info">
            <h2>SEZÓNA 2 - DŮLEŽITÉ INFORMACE</h2>
            <p>Druhá sezóna VRL přináší nové okruhy a ještě více napětí!</p>
            <div class="season-details">
                <div class="detail-card">
                    <h3><i class="fas fa-calendar-alt"></i> Formát</h3>
                    <p>20 závodů<br>2 části sezóny</p>
                </div>

                <div class="detail-card">
                    <h3><i class="fas fa-trophy"></i> Bodování</h3>
                    <p>1. Místo 25<br>2. Místo 18<br>3. Místo 15<br>12-10-8-6-4-2-1</p>
                </div>

                <div class="detail-card">
                    <h3><i class="fas fa-gamepad"></i> Platforma</h3>
                    <p>F1 25<br> PC Steam/EA<br>PS/Xbox</p>
                </div>

                <div class="detail-card">
                    <h3><i class="fas fa-book"></i> Pravidla</h3>
                    <p>Pravidla ligy a závodění</p>
                    <a href="https://docs.google.com/document/d/1o9ULOGPHiwvApBRguubZ3BCT3zQkdIPZtWpjO5tcUpc/edit?tab=t.0"
                        class="btn"> Pravidla</a>
                </div>
            </div>
        </section>

        <section class="next-race">
            <div class="container">
                <h2>Další závod</h2>
                <div id="countdown">
                    <span id="cd-days">--</span> dny
                    <span id="cd-hours">--</span> hodin
                    <span id="cd-minutes">--</span> minut
                    <span id="cd-seconds">--</span> sekund
                </div>
                <div class="stream-link">
                    <a href="https://www.youtube.com/watch?v=Boq5FrJFBV0" id="stream-link" target="_blank">
                        Sleduj stream na YouTube
                    </a>
                </div>
            </div>
        </section>



        <h2 class="section-title">Nadcházející závody</h2>
        <section class="calendar" id="calendar"></section>

        <a href="calendar.html" class="btn">Zobrazit celý kalendář</a>


        <h2 class="section-title">PRŮBĚŽNÉ POŘADÍ</h2>
        <div class="standings-container">
            <section class="standings">
                <div class="standings-card">
                    <div class="standings-header">
                        <h3>Jezdci</h3>
                    </div>
                    <div class="standings-body">
                        <div class="driver-row">
                            <div class="driver-name">M. Heligr</div>
                            <div class="driver-points">90 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">M. Klaboch</div>
                            <div class="driver-points">54 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">J. Kubeš</div>
                            <div class="driver-points">47 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">O. Maťko</div>
                            <div class="driver-points">44 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">M. Vaculík</div>
                            <div class="driver-points">33 bodů</div>
                        </div>
                    </div>
                </div>

                <div class="standings-card">
                    <div class="standings-header">
                        <h3>Týmy</h3>
                    </div>
                    <div class="standings-body">
                        <div class="driver-row">
                            <div class="driver-name">McLaren</div>
                            <div class="driver-points">123 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">Aston Martin</div>
                            <div class="driver-points">67 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">Ferrari</div>
                            <div class="driver-points">61 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">Mercedes</div>
                            <div class="driver-points">56 bodů</div>
                        </div>
                        <div class="driver-row">
                            <div class="driver-name">Williams</div>
                            <div class="driver-points">45 bodů</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>VRL</h3>
                    <p>Virtuální závodní liga pro nadšence Formule 1. Připoj se k nám a zažij motorsport z pohodlí
                        domova.</p>
                    <div class="social-icons">
                        <a href="https://www.instagram.com/vrl_velocityracingleague/"><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/@Velocity_Racing_League_VRL"><i class="fab fa-youtube"></i></a>
                        <a href="https://discord.gg/CMxscEUcRd"><i class="fab fa-discord"></i></a>
                        <a href="https://www.tiktok.com/@velocity_racingleague" target="_blank"><i
                                class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Navigace</h3>
                    <ul>
                        <li><a href="index.html">Domů</a></li>
                        <li><a href="calendar.html">Kalendář</a></li>
                        <li><a href="jezdci.html">Jezdci</a></li>
                        <li><a href="tymy.html">Týmy</a></li>
                        <li><a href="okruh.html">Okruhy</a></li>
                        <li><a href="vysledky.html">Výsledky</a></li>
                        <li><a href="prihlasky.html">Příhlášky</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Organizátoři</h3>
                    <ul>
                        <li><a href="https://www.instagram.com/matyaasko/">Matěj Vaculík</a></li>
                        <li><a href="https://www.instagram.com/beeeeuuuuu/">Maxim Heligr</a></li>
                        <li><a href="https://www.instagram.com/_.duda.o._/">Ondra Duda</a></li>
                        <li><a href="https://www.instagram.com/klabochmartin?igsh=Ym1pN29hNTFmbjBx&utm_source=qr">Martin
                                Klaboch</a></li>
                        <li><a href="https://www.instagram.com/olinkkt/">Oliver Seidl</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 VRL. Všechna práva vyhrazena.</p>
            </div>
        </div>
    </footer>

    <script src="js/global.js"></script>
    <script>

        // Data závodů (ponecháš jak máš)
        const races = [
            { round: "R1", name: "Austrálie", date: "2025-09-09", track: "Melbourne Grand Prix Circuit" },
            { round: "R2", name: "Velká Británie", date: "2025-09-16", track: "Silverstone Circuit" },
            { round: "R3", name: "Bahrain", date: "2025-09-30", track: "Bahrain International Circuit" },
            { round: "R4", name: "Miami", date: "2025-10-07", track: "Miami International Autodrome" },
            { round: "R5", name: "Imola", date: "2025-10-14", track: "Autodromo Enzo e Dino Ferrari" },
            { round: "R6", name: "Ázerbájdžán", date: "2025-10-21", track: "Baku City Circuit" },

            { round: "R7", name: "Japonsko", date: "2025-11-04", track: "Suzuka International Racing Course" },
            { round: "R8", name: "Kanada", date: "2025-11-11", track: "Circuit Gilles Villeneuve" },
            { round: "R9", name: "Singapur", date: "2025-11-18", track: "Marina Bay Street Circuit" },
            { round: "R10", name: "Belgie", date: "2025-12-02", track: "Circuit de Spa-Francorchamps" },
            { round: "R11", name: "Španělsko", date: "2025-12-16", track: "Circuit de Barcelona-Catalunya" },

            { round: "R12", name: "Mexiko", date: "2026-01-06", track: "Autódromo Hermanos Rodríguez" },
            { round: "R13", name: "Brazílie", date: "2026-01-20", track: "Autódromo José Carlos Pace" },
            { round: "R14", name: "USA", date: "2026-02-03", track: "Circuit of the Americas" },

            { round: "R15", name: "Rakousko (Reverse Sprint)", date: "2026-02-17", track: "Red Bull Ring" },
            { round: "R16", name: "Monako", date: "2026-03-03", track: "Circuit de Monaco" },
            { round: "R17", name: "Itálie", date: "2026-03-10", track: "Autodromo Nazionale Monza" },
            { round: "R18", name: "Maďarsko", date: "2026-03-24", track: "Hungaroring" },

            { round: "R19", name: "Katar", date: "2026-04-07", track: "Losail International Circuit" },
            { round: "R20", name: "Saudská Arábie", date: "2026-04-21", track: "Jeddah Corniche Circuit" },
            { round: "R21", name: "Abu Dhabi", date: "2026-04-28", track: "Yas Marina Circuit" }
        ];



        // Funkce pro vypsání závodů (limit je volitelný)
        function populateCalendar(containerId, limit = null) {
            const calendar = document.getElementById(containerId);
            calendar.innerHTML = '';

            const today = new Date();

            // Převedeme string datum → objekt Date a nastavíme "cutoff" půlnoc dalšího dne
            const upcoming = races
                .map(r => {
                    const dateObj = new Date(r.date);

                    // cutoff = půlnoc následujícího dne
                    const cutoff = new Date(dateObj);
                    cutoff.setDate(cutoff.getDate() + 1);
                    cutoff.setHours(0, 0, 0, 0);

                    return { ...r, dateObj, cutoff };
                })
                // závod zůstává do půlnoci po svém datu
                .filter(r => r.cutoff > today)
                .sort((a, b) => a.dateObj - b.dateObj);

            // Omezíme na 5 (pokud limit je nastaven)
            const toShow = limit ? upcoming.slice(0, limit) : upcoming;

            // Vykreslení závodů
            toShow.forEach(race => {
                const raceCard = document.createElement('div');
                raceCard.className = 'race-card';

                raceCard.innerHTML = `
            <div class="race-date">
                <div class="race-round">${race.round}</div>
                <strong>${race.dateObj.toLocaleDateString("cs-CZ")}</strong>
            </div>
            <div class="race-info">
                <h3>${race.name}</h3>
                <p class="race-track">${race.track}</p>
                <p>19:00 | Krátká kvalifikace | 50 % Závod</p>
            </div>
        `;

                calendar.appendChild(raceCard);
            });
        }

        // === Automatické obnovení o půlnoci ===
        function scheduleMidnightRefresh(containerId, limit = null) {
            const now = new Date();
            const midnight = new Date();

            midnight.setHours(24, 0, 0, 0); // dnešní půlnoc

            const msToMidnight = midnight.getTime() - now.getTime();

            setTimeout(() => {
                populateCalendar(containerId, limit);     // obnoví seznam
                scheduleMidnightRefresh(containerId, limit); // naplánuje další refresh
            }, msToMidnight);
        }

        // Spuštění při načtení stránky
        document.addEventListener("DOMContentLoaded", () => {
            populateCalendar("calendar", 5);         // inicializace (změň "calendar" na ID tvého kontejneru)
            scheduleMidnightRefresh("calendar", 5);  // automatické obnovování
        });


        // Inicializace
        document.addEventListener('DOMContentLoaded', () => {
            // hlavní stránka → jen 5 nadcházejících
            populateCalendar('calendar', 5);
        });


        // Inicializace při načtení stránky
        document.addEventListener('DOMContentLoaded', () => {
            populateCalendar();
        });

        let lastScrollTop = 0;
        const header = document.querySelector('header');

        window.addEventListener('scroll', () => {
            const st = window.pageYOffset || document.documentElement.scrollTop;

            if (window.innerWidth <= 768) { // pouze mobil
                if (st > lastScrollTop) {
                    // scroll dolů → schovej header
                    header.style.top = "-120px";
                } else {
                    // scroll nahoru → ukaž header
                    header.style.top = "0";
                }
            }

            lastScrollTop = st <= 0 ? 0 : st;
        });

        document.addEventListener('DOMContentLoaded', () => {
            const countdownEl = document.getElementById('countdown');
            const streamLink = document.getElementById('stream-link');

            function getNextRace() {
                const now = new Date();

                return races
                    .map(r => {
                        // Vytvoříme datum závodu v 19:00 místního času
                        const raceDate = new Date(`${r.date}T19:00:00`);
                        return { ...r, raceDate };
                    })
                    .filter(r => r.raceDate > now)
                    .sort((a, b) => a.raceDate - b.raceDate)[0];
            }

            const nextRace = getNextRace();

            if (!nextRace) {
                countdownEl.textContent = "Žádné další závody";
                streamLink.style.display = 'none';
                return;
            }

            // Můžeš zde dynamicky měnit text nebo odkaz streamu, např. podle `nextRace.round`
            // streamLink.href = `https://www.youtube.com/watch?v=${nextRace.youtubeId}`

            function updateCountdown() {
                const now = new Date();
                const diff = nextRace.raceDate - now;

                if (diff <= 0) {
                    countdownEl.textContent = "Závod právě probíhá!";
                    clearInterval(interval);
                    return;
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / (1000 * 60)) % 60);
                const seconds = Math.floor((diff / 1000) % 60);

                document.getElementById('cd-days').textContent = String(days).padStart(2, '0');
                document.getElementById('cd-hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('cd-minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('cd-seconds').textContent = String(seconds).padStart(2, '0');
            }

            updateCountdown();
            const interval = setInterval(updateCountdown, 1000);
        });


    </script>
</body>

</html>
